(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9735:function(e,t,a){Promise.resolve().then(a.bind(a,4701))},4701:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var n=a(7437),i=a(2265),r=a(9842),s=a(9854),l=a(5236);let o={apiKey:"production".NEXT_PUBLIC_API_KEY,authDomain:"pantry-f15b6.firebaseapp.com",projectId:"pantry-f15b6",storageBucket:"pantry-f15b6.appspot.com",messagingSenderId:"899794720277",appId:"1:899794720277:web:8fab1114041b0a65d8a01c",measurementId:"G-6G6YER7MHW"},c=(0,l.ZF)(o),d=(0,r.ad)(c),h=(0,s.cF)(c);var u=a(1326),p=a(2786),g=a(4990),m=a(511),x=a(6548),j=a(2674),f=a(6645),b=a(4691),Z=a(7116),y=a(6351),w=a(8884),k=a(335),I=a(5343),v=a(4830),C=a(5253),E=a(7590),_=a(6310);function A(){let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1),[o,c]=(0,i.useState)(""),[A,U]=(0,i.useState)(null),N=(0,i.useRef)(null),S=async()=>{let e=(0,r.IO)((0,r.hJ)(d,"pantry")),a=await (0,r.PL)(e),n=[];a.forEach(e=>{n.push({id:e.id,name:e.id,...e.data()})}),t(n)},J=async e=>{let t=(0,r.JU)((0,r.hJ)(d,"pantry"),e),a=await (0,r.QT)(t),n=null;if(A){let t=(0,s.iH)(h,"product-images/".concat(e));await (0,s.KV)(t,A),n=await (0,s.Jt)(t)}if(a.exists()){let{quantity:e}=a.data();await (0,r.r7)(t,{quantity:e+1,imageUrl:n||a.data().imageUrl})}else await (0,r.pl)(t,{quantity:1,imageUrl:n});await S(),U(null)},P=async(e,t)=>{let a=(0,r.JU)((0,r.hJ)(d,"pantry"),e),n=await (0,r.QT)(a);if(n.exists()){let{quantity:e}=n.data(),i=e+t;i>0?await (0,r.r7)(a,{quantity:i}):await (0,r.oe)(a),await S()}};(0,i.useEffect)(()=>{S()},[]);let B=()=>{l(!1),c(""),U(null)};return(0,n.jsxs)(u.Z,{sx:{minHeight:"100vh",backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/pantry-f15b6.appspot.com/o/product-images%2Fpexels-semiha-643347578-25186434.jpg?alt=media&token=d7c0fb4e-e2f8-4911-a34b-a40743c940a4')",backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,n.jsx)(p.Z,{maxWidth:"md",children:(0,n.jsxs)(g.Z,{elevation:3,sx:{p:4,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[(0,n.jsx)(m.Z,{variant:"h2",gutterBottom:!0,align:"center",color:"brown",children:"Pantryfront"}),(0,n.jsx)(x.Z,{style:{backgroundColor:"#A21E02"},variant:"contained",onClick:()=>l(!0),sx:{mb:3},children:"Add New Item"}),(0,n.jsx)(j.Z,{component:g.Z,children:(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(b.Z,{children:(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(y.Z,{children:"Item Name"}),(0,n.jsx)(y.Z,{children:"Image"}),(0,n.jsx)(y.Z,{align:"right",children:"Quantity"}),(0,n.jsx)(y.Z,{align:"right",children:"Actions"})]})}),(0,n.jsx)(w.Z,{children:e.map(e=>{let{id:t,name:a,quantity:i,imageUrl:r}=e;return(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(y.Z,{component:"th",scope:"row",children:a.charAt(0).toUpperCase()+a.slice(1)}),(0,n.jsx)(y.Z,{children:r&&(0,n.jsx)("img",{src:r,alt:a,style:{width:"100px",height:"100px",objectFit:"cover"}})}),(0,n.jsx)(y.Z,{align:"right",children:i}),(0,n.jsxs)(y.Z,{align:"right",children:[(0,n.jsx)(k.Z,{color:"primary",onClick:()=>P(t,1),children:(0,n.jsx)(C.Z,{})}),(0,n.jsx)(k.Z,{color:"secondary",onClick:()=>P(t,-1),children:(0,n.jsx)(E.Z,{})})]})]},t)})})]})})]})}),(0,n.jsx)(I.Z,{open:a,onClose:B,children:(0,n.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4},children:[(0,n.jsx)(m.Z,{variant:"h6",component:"h2",gutterBottom:!0,children:"Add Item"}),(0,n.jsx)(v.Z,{label:"Item Name",variant:"outlined",fullWidth:!0,value:o,onChange:e=>c(e.target.value),sx:{mb:2}}),(0,n.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:N,onChange:e=>{e.target.files[0]&&U(e.target.files[0])}}),(0,n.jsx)(x.Z,{variant:"outlined",startIcon:(0,n.jsx)(_.Z,{}),onClick:()=>N.current.click(),sx:{mb:2},children:A?"Change Image":"Upload Image"}),A&&(0,n.jsxs)(m.Z,{variant:"body2",children:["Image selected: ",A.name]}),(0,n.jsx)("br",{}),(0,n.jsx)(x.Z,{style:{backgroundColor:"#A21E02"},variant:"contained",onClick:()=>{o.trim()&&(J(o.trim()),B())},children:"Add"})]})})]})}}},function(e){e.O(0,[358,835,443,971,23,744],function(){return e(e.s=9735)}),_N_E=e.O()}]);